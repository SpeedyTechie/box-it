!function(t){"use strict";t.boxit=function(s){var a=t.extend({instance:"default",wrapClass:"",boxClass:"",closeButton:!0,closeButtonText:"Ã—",closeButtonClass:""},s);if(t('[data-boxit-instance="'+a.instance+'"]').length<1){var e=t("<div />");e.addClass("boxit-wrap"),e.addClass("boxit-instance-"+a.instance),e.addClass(a.wrapClass),e.attr("data-boxit-instance",a.instance),e.click(function(s){t(s.target).is(t(this))&&e.boxit("close")});var o=t("<div />");o.addClass("boxit-box"),o.addClass(a.boxClass),o.attr("data-boxit-box",a.instance),o.attr("tabindex","-1"),o.appendTo(e);var n=void 0;a.closeButton&&(n=t("<button />"),n.addClass("boxit-close"),n.addClass(a.closeButtonClass),n.attr("type","button"),n.attr("title","Close"),n.attr("data-boxit-close",a.instance),n.text(a.closeButtonText),n.click(function(){e.boxit("close")}),n.appendTo(o));var i=t("<div />");return i.css("opacity","0"),i.css("position","absolute"),i.css("z-index","-999999"),i.css("width","0"),i.css("height","0"),i.css("overflow","hidden"),i.attr("tabindex","0"),i.focus(function(){return o.focus(),!1}),i.appendTo(e),e.prependTo("body"),t(document).keydown(function(t){"Escape"===t.key||"Esc"===t.key?e.boxit("close"):27===t.keyCode&&e.boxit("close")}),e}return!1},t.fn.boxit=function(s,a){var e=this;if(e.is("[data-boxit-instance]")){if("open"===s){if("undefined"!=typeof a&&!e.boxit("isOpen")){var o=e.children("[data-boxit-box]").first(),n=o.children("[data-boxit-close]").first(),i=a;1===o.length&&(i=i.first(),n.detach(),o.empty(),o.append(n),o.append(i.clone()),e.addClass("active"),e.data("lastFocus",t(document.activeElement)),o.focus())}}else if("close"===s)e.removeClass("active"),e.data("lastFocus").focus();else if("isOpen"===s)return e.hasClass("active");return e}return!1}}(jQuery);